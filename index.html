<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>My Website</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.103.0.min.js"></script>

</head>

<body>
    <h1></h1>
    <center>
        <button id="my-button" style="color: green; font: bold 34px Arial ">YENÄ°LE</button>
    </center>
    <div id="data"></div>

    <script>
              

        var url = 'https://groupednews.s3.us-east-1.amazonaws.com/example.json?response-content-disposition=inline&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEAUaDGV1LWNlbnRyYWwtMSJGMEQCIBj9rGGGfX6qilDlTfNe%2BulLe2ht6C4x4LeyjyugNW%2FzAiAFPcGLMdCMWAexC8%2FFFyflCsDAecy%2Bgps%2FV3OZC%2FSCzirtAgi%2B%2F%2F%2F%2F%2F%2F%2F%2F%2F%2F8BEAEaDDc5MzkyNDg5NDUxOSIMI5xBHasY%2FSsi9vfcKsECcbyqZDWDYOABFKtAX1DT6QFbLyOKFl6of2Fz3Tb9GsishI9nSf5H5s8cfVKqARWheJ1uL%2FmIC44UQg3bP3gGvXgAlYVVDoKkcxw2h3XWPcE4SrU%2Bi%2Fp6b8y4cGlGYvnGXKNYyXoanFQY45GVvq2mHuPNtuZlJMjOJepSK%2B6i7D%2BlygbdIaJic8kteBFY2e6j0dQ6FjA6QEAfPqbyfU1tcSABVh9WjsunS6Qur8L8T4QQLAifvVrfLxl5gWt%2BWYK%2FTiYwXzAJCgzhfblJLzx1kBTvgKvC21EIICtVhtl76i7jZKqjm1XwptiuW63tM9OntsaATVYj6Lb3OIRzSJKhw8qScJluZ%2BMrIfB5p3bwsJ%2FXVTzB3b6iPZaQtG57YzzNso0%2BxM2uYukAjGq0vvY03CcsUF74g8FYVdzue8jVpnV6MMyqvKAGOrQC6L%2BmCJOgRLxnjFchGqJWfOThogHcvFaLo5QHh9gCyoanoaXE34neNGXmBSGUh0OVrBEUfWf4XTSq5qStQct7imLaTG8aRWrA0fzuK630oMkcv%2FPgiM4MIwHyM4zwL9dzFnPtRCPzh%2BXdb8fVOW30uFcRri1aTKuDq%2BXKi0A95AEfzJ8tyX8qL%2FKBb2L5RTJmaSXa96eWwZ9fRNFu93HuX8YW6hsK%2BmZ8rPhf4yfB17%2Flf9CN5GGG1QZJGv%2FbLRLKfQblPvfTc%2FROsXv863dRLxy3oWTGfZxrmPjQ%2BjwJw9UsB3uTITIDcdFyJ%2Bzkn%2BgNTdMd%2Fk0%2FkIRiOml4LFIXTJTKKt98VGU1XTC7Pqf%2Fp4Zx6O2FMOR7Z64oh7Q3PCVRn13XHuFdUDLtPutvKuLSI8cwD98%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20230313T125357Z&X-Amz-SignedHeaders=host&X-Amz-Expires=43200&X-Amz-Credential=ASIA3RWM4P436GJEWNWZ%2F20230313%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Signature=8a7016e1804d21058b3445dd85e804c8070316310b3f9970beb2b5695fb7b4fa';
        var randomNum = 0;
        var index_news = -1;

        function randomNumInRange(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }
        var myButton = document.querySelector('#my-button');
        myButton.addEventListener('click', function() {


            const dataDisplay = document.getElementById("data");

            // clear previous data
            dataDisplay.innerHTML = "";


            $.getJSON(url, function(data) {

                var lengtofdata = Object.keys(data).length;
                randomNum = randomNumInRange(0, lengtofdata);


                $.each(data, function(key, value) {
                    if (key == "cluster" + index_news) {



                        $.each(value, function(innerkey, innervalue) {


                            if (innerkey == "picture") {
                                $("#data").append("<p>" + " " + "</p>");
                                $("#data").append("<img src=" + innervalue + " width='500' height='300'/>");
                                $("#data").append("<p>" + " " + "</p>");
                            };

                            if (innerkey == "main") {
                                //$("#data").append("<h3>" + innervalue + "</h3>");
                                //$("#data").append("<p>" +" " + "</p>");
                            };

                            if (innerkey == "info") {
                                $.each(innervalue, function(innerInnerkey, innerInnervalue) {
                                    $("#data").append("<h4>&nbsp;&nbsp;&nbsp;&nbsp;" + innerInnervalue.title + " ------ " + "<a href=" + innerInnervalue.link + " target='_blank'>" + innerInnervalue.source + "</a>" + "</h4>")
                                    //$("#data").append("<a href="  +innerInnervalue.link +" target='_blank'>" + innerInnervalue.source +"</a>");
                                    $("#data").append("<p>" + " " + "</p>");



                                });
                            };
                            $("#data").append("<br></br>");


                        });

                    };
                });

            });

            index_news = index_news + 1;


        });
    </script>
</body>

</html>
